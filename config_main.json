{
    "directories": {
        "root_dir": "/data/sama/Deep_Learning_Pipeline",
        "data_dir": "/data/bahrdoh/CT_Model/Test/proton",
        "folder_name": {
            "models_folder": "models",
            "optimizers_folder": "optimizers",
            "data_preproc_folder": "data_preproc",
            "save_root_folder": "datasets",
            "cache_folder": "persistent_cache"
        },
        "file_names": {
            "stratified_sampling_test_csv": "stratified_sampling_test_manual_94.csv",
            "stratified_sampling_full_csv": "stratified_sampling_full_manual_94.csv",
            "train_val_test_patient_ids_json": "train_val_test_patient_ids.json",
            "results_csv": "results.csv",
            "results_overview_csv": "results_overview.csv",
            "i_outputs_csv": "{i}_outputs.csv",
            "lr_finder_png": "lr_finder.png",
            "model_txt": "model.txt",
            "best_model_pth": "best_model.pth",
            "results_png": "results.png",
            "optuna_study_name": "optuna_study.pkl",
            "optuna_sampler_name": "optuna_sampler.pkl",
            "filename_best_model_pth": "best_model.pth",
            "exclude_patients_csv": "exclude_patients.csv",
            "filename_lr_finder_png": "lr_finder.png",
            "exp_result_txt": "epoch_results.txt"
        },
        "experiments": {
            "root_dir": "/data/sama/Deep_Learning_Pipeline/experiments/test",
            "src_folder": "src",
            "models_folder": "models",
            "optimizers_folder": "optimizers",
            "data_preproc_folder": "data_preproc",
            "figures_folder": "figures",
            "optuna_path_pickles": "pickles"
        }
    },
    "device": {
        "wandb_mode": "online",
        "seed": 4,
        "nr_of_decimals": 3,
        "cudnn_benchmark": true,
        "data_loader": {
            "dataset_type": "cache",
            "cache_rate": 1.0,
            "num_workers": 4,
            "to_device": false,
            "dataloader_type": "standard",
            "use_sampler": false,
            "dataloader_drop_last": false
        }
    },
    "data": {
        "n_input_channels": 1,
        "image_keys": [
            "fixed",
            "moving",
            "pos"
        ],
        "concat_key": "fixed_moving",
        "train_frac": 0.9,
        "val_frac": 0.15,
        "sampling_type": "stratified",
        "perform_stratified_sampling_full": true,
        "strata_groups": [
            "pat_id"
        ],
        "split_col": "Split",
        "features_dl": [
            "pat_id"
        ],
        "cross_validation": {
            "cv_strata_groups": [
                "pat_id"
            ],
            "cv_folds": 2,
            "cv_type": "stratified"
        },
        "output_size": [
            128,
            128,
            128
        ],
        "spacing": [
            4.0,
            4.0,
            4.0
        ]
    },
    "data_preprocessing": { "augmentation_function": "call_aug_transform_1'",
                            "generic_transformation":"call_generic_transform_1",
        "augmentation": {
            "perform_data_aug": true,
            "data_aug_p": 0.5,
            "data_aug_strength": 1
        },
        "clipping": {
            "ct": {
                "ct_clip": false,
                "ct_a_min": -200,
                "ct_a_max": 400,
                "ct_b_min": 0.0,
                "ct_b_max": 1.0
            },
            "rtdose": {
                "rtdose_clip": false,
                "rtdose_a_min": 0,
                "rtdose_a_max": 8000,
                "rtdose_b_min": 0.0,
                "rtdose_b_max": 1.0
            },
            "segmentation_map": {
                "seg_map_clip": false
            }
        },
        "cropping": {"crop_prob": 1.0,
                     "cropping_dim": [128,128,128],
                    "num_sample": 4
                    },
        "translocation": {"coord_prob": 1.0, 
                       "num_coordinations": 3
                   },
        "augmix": {
            "perform_augmix": false,
            "mixture_width": 3,
            "mixture_depth": [
                1,
                3
            ],
            "augmix_strength": 3
        },
        "interpolation": {
            "ct_interpol_mode_3d": "trilinear",
            "rtdose_interpol_mode_3d": "trilinear",
            "segmentation_interpol_mode_3d": "nearest",
            "ct_dose_seg_interpol_mode_3d": "trilinear",
            "ct_interpol_mode_2d": "bilinear",
            "rtdose_interpol_mode_2d": "bilinear",
            "segmentation_interpol_mode_2d": "nearest",
            "ct_dose_seg_interpol_mode_2d": "bilinear"
        },
        "elastic_deformation": { "elastic_prob": 1.0,
            "sigma_elastic": [
                8,
                8
            ],
            "magnitude_elastic": [
                100,
                100
            ]
        }
    },
    "model": {
        "model_name": "Dual_DCNN_LReLu",
        "n_layers": 5,
        "filters": [
            8,
            8,
            16,
            16,
            32
        ],
        "kernel_sizes": [
            7,
            5,
            4,
            3,
            3
        ],
        "strides": [
            [
                2,
                2,
                2
            ],
            [
                2,
                2,
                2
            ],
            [
                2,
                2,
                2
            ],
            [
                2,
                2,
                2
            ],
            [
                2,
                2,
                2
            ]
        ],
        "pad_value": 0,
        "lrelu_alpha": 0.1,
        "pooling_conv_filters": null,
        "perform_pooling": false,
        "linear_units": [
            16
        ],
        "dropout_p_j": [
            0
        ],
        "use_bias": true,
        "num_classes": 2,
        "num_ohe_classes": 2,
        "max_pool_dict": {
            "kernel_size_pool": 3,
            "stride_pool": 1,
            "padding_pool": 0
        },
        "perform_max_pool": [
            true,
            true
        ],
        "perform_activation": [
            true,
            true
        ]
    },
    "transfer_learning": {
        "pretrained_path": null
    },
    "optimization": {
        "initializer": {
            "weight_init_name": "kaiming_uniform",
            "kaiming_a": 2.2360679775,
            "kaiming_mode": "fan_in",
            "kaiming_nonlinearity": "leaky_relu",
            "gain": 0
        },
        "optimizer": {
            "optimizer_name": "ada_bound",
            "optimizer_name_next": [],
            "momentum": 0,
            "weight_decay": 0.05,
            "hessian_power": 1.0,
            "use_lookahead": false,
            "lookahead_k": 5,
            "lookahead_alpha": 0.5,
            "patience_opt": 9
        },
        "loss_function": {
            "loss_function_name": "l1_loss",
            "loss_weights": [
                1,
                0,
                1,
                1,
                0,
                0
            ],
            "label_weights": [
                1,
                1.5
            ],
            "loss_reduction": "mean"
        },
        "scheduler": {
            "scheduler_name": "cosine",
            "step_size_up": 1185,
            "gamma": 0.95,
            "grad_max_norm": null,
            "step_size": 15,
            "schedular_mode": "min",
            "schedular_factor": 0.1,
            "verbose": true,
            "patience": 10
        },
        "learning_rate": {
            "lr": 0.0001,
            "lr_finder_lower_lr": 1e-06,
            "lr_finder_upper_lr": 0.001,
            "lr_finder_num_iter": 0,
            "warmup_batches": 0,
            "T0": 8,
            "T_mult": 1,
            "eta_min": 1e-08,
            "base_lr": 1e-07,
            "max_lr": 0.0001,
            "factor_lr": 0.5,
            "min_lr": 1e-08,
            "patience_lr": 7,
            "manual_lr": [
                0.001,
                1e-05,
                1e-06
            ]
        }
    },
    "training": {
        "nr_runs": 1,
        "max_epochs": 200,
        "batch_size": 8,
        "max_batch_size": 16,
        "eval_interval": 1
    },
    "plotting": {
        "plot_interval": 10,
        "max_nr_images_per_interval": 1,
        "figsize": [
            12,
            12
        ]
    },
    "optuna": {
  
        },

    "segmentation_structures": []
}